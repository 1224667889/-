var dom = document.getElementById('scatter-chart-container');
var myChart = echarts.init(dom, null, {
  renderer: 'canvas',
  useDirtyRect: false
});
var app = {};

var option;

// See https://github.com/ecomfe/echarts-stat
echarts.registerTransform(ecStat.transform.regression);
const data =
    [[50.0, 6.0], [21.0, 3.6], [127.0, 3.9], [59.0, 4.9], [21.0, 3.1], [50.0, 5.2], [50.0, 5.7], [10.0, 2.1], [34.0, 3.0], [4.0, 2.0], [10.0, 2.6], [12.0, 5.7], [17.0, 2.9], [17.0, 2.4], [7.0, 3.0], [7.0, 3.5], [18.0, 3.0], [137.0, 3.4], [10.0, 5.8], [16.0, 4.1], [8.0, 4.0], [19.0, 4.5], [10.0, 5.3], [8.0, 4.5], [8.0, 3.2], [8.0, 3.7], [14.0, 2.8], [20.0, 4.2], [6.0, 4.6], [6.0, 4.1], [20.0, 6.6], [20.0, 6.1], [6.0, 3.3], [6.0, 3.8], [9.0, 2.9], [5.0, 3.1], [5.0, 3.6], [11.0, 4.5], [12.0, 3.4], [590.0, 5.6], [10.0, 8.0], [11.0, 3.2], [170.0, 6.5], [9.0, 4.3], [12.0, 4.2], [24.0, 3.6], [13.0, 3.6], [13.0, 3.1], [20.0, 7.4], [12.0, 6.1], [15.0, 5.2], [15.0, 5.7], [26.0, 5.2], [10.0, 4.3], [20.0, 2.9], [10.0, 3.5], [10.0, 3.0], [8.0, 2.2], [8.0, 4.1], [22.0, 4.5], [17.0, 3.8], [4.0, 4.7], [16.0, 3.1], [16.0, 3.6], [20.0, 5.1], [6.0, 2.3], [0.0, 1.4], [570.0, 8.1], [16.0, 4.4], [30.0, 6.2], [0.0, 2.2], [270.0, 5.9], [50.0, 5.6], [30.0, 5.9], [11.0, 4.1], [11.0, 4.6], [15.0, 3.4], [9.0, 3.3], [9.0, 3.8], [13.0, 2.1], [20.0, 6.9], [14.0, 3.2], [39.0, 3.8], [6.0, 5.0], [12.0, 4.3], [15.0, 4.2], [15.0, 4.7], [21.0, 3.0], [10.0, 2.5], [50.0, 6.9], [17.0, 2.8], [11.0, 5.9], [18.0, 3.9], [7.0, 3.4], [7.0, 3.9], [18.0, 3.4], [129.0, 3.2], [20.0, 3.3], [29.0, 2.5], [600.0, 5.9], [7.0, 4.7], [8.0, 3.1], [18.0, 4.2], [7.0, 4.2], [102.0, 3.2], [10.0, 6.0], [10.0, 6.5], [110.0, 6.4], [10.0, 5.2], [10.0, 5.7], [8.0, 4.4], [8.0, 4.9], [19.0, 4.4], [172.0, 4.0], [5.0, 4.3], [5.0, 4.8], [5.0, 3.0], [17.0, 5.0], [14.0, 2.2], [6.0, 4.5], [6.0, 4.0], [40.0, 6.0], [0.0, 3.6], [6.0, 3.2], [11.0, 3.1], [130.0, 4.8], [6.0, 3.7], [24.0, 4.8], [13.0, 3.0], [11.0, 4.4], [7.0, 2.9], [18.0, 2.9], [11.0, 6.3], [131.0, 3.0], [10.0, 3.4], [129.0, 4.1], [10.0, 3.9], [8.0, 2.6], [600.0, 7.1], [12.0, 6.5], [32.0, 2.0], [7.0, 4.8], [10.0, 4.2], [16.0, 3.5], [22.0, 3.1], [18.0, 4.3], [10.0, 4.7], [7.0, 4.3], [18.0, 4.8], [110.0, 7.3], [10.0, 6.1], [10.0, 6.6], [30.0, 5.8], [8.0, 5.8], [5.0, 2.5], [22.0, 4.9], [23.0, 2.8], [140.0, 5.9], [20.0, 5.5], [20.0, 5.0], [0.0, 2.1], [6.0, 2.2], [40.0, 6.1], [40.0, 6.6], [26.0, 3.8], [13.0, 2.5], [24.0, 2.5], [14.0, 3.6], [10.0, 7.4], [100.0, 6.5], [11.0, 5.3], [50.0, 5.5], [21.0, 3.4], [100.0, 5.7], [430.0, 6.0], [9.0, 3.2], [9.0, 3.7], [530.0, 6.9], [10.0, 2.4], [10.0, 2.9], [180.0, 6.2], [7.0, 3.8], [7.0, 3.3], [110.0, 6.3], [13.0, 5.7], [10.0, 5.1], [10.0, 5.6], [30.0, 4.8], [60.0, 5.8], [19.0, 3.0], [8.0, 3.0], [580.0, 5.6], [30.0, 3.0], [8.0, 3.5], [17.0, 4.6], [17.0, 4.1], [20.0, 4.0], [140.0, 6.3], [500.0, 5.9], [26.0, 2.3], [15.0, 2.8], [15.0, 2.3], [380.0, 5.0], [5.0, 3.4], [5.0, 3.9], [14.0, 2.1], [38.0, 3.0], [10.0, 6.4], [10.0, 6.9], [5.0, 4.2], [11.0, 3.0], [6.0, 3.6], [9.0, 2.7], [6.0, 3.1], [170.0, 6.3], [9.0, 4.6], [12.0, 4.0], [13.0, 3.4], [9.0, 4.1], [23.0, 4.0], [20.0, 7.2], [6.0, 4.4], [12.0, 3.2], [12.0, 3.7], [6.0, 4.9], [40.0, 6.9], [18.0, 2.3], [7.0, 2.8], [21.0, 4.8], [24.0, 4.2], [10.0, 3.3], [10.0, 3.8], [19.0, 2.5], [22.0, 3.5], [22.0, 3.0], [5.0, 2.9], [5.0, 2.4], [7.0, 5.5], [7.0, 5.0], [16.0, 4.2], [17.0, 3.6], [160.0, 5.1], [30.0, 6.0], [11.0, 2.0], [0.0, 2.5], [80.0, 6.2], [11.0, 2.5], [30.0, 5.2], [30.0, 5.7], [50.0, 4.6], [13.0, 2.9], [24.0, 2.9], [580.0, 6.0], [20.0, 6.7], [14.0, 3.0], [9.0, 2.3], [20.0, 6.2], [20.0, 5.4], [20.0, 5.9], [132.0, 4.5], [12.0, 4.1], [15.0, 4.0], [15.0, 4.5], [26.0, 3.7], [9.0, 3.6], [9.0, 3.1], [15.0, 3.7], [10.0, 2.3], [27.0, 4.2], [640.0, 7.8], [9.0, 4.9], [50.0, 5.9], [120.0, 7.0], [7.0, 4.0], [8.0, 3.9], [8.0, 3.4], [28.0, 2.6], [164.0, 3.9], [18.0, 4.0], [7.0, 4.5], [7.0, 3.2], [7.0, 3.7], [18.0, 3.7], [60.0, 6.0], [10.0, 5.5], [10.0, 5.0], [8.0, 4.2], [20.0, 3.6], [60.0, 5.2], [530.0, 5.8], [30.0, 6.1], [5.0, 3.3], [20.0, 7.1], [6.0, 4.3], [20.0, 6.8], [20.0, 6.3], [6.0, 3.0], [11.0, 3.9], [9.0, 2.6], [11.0, 3.4], [13.0, 3.3], [13.0, 3.8], [11.0, 4.2], [23.0, 3.6], [12.0, 3.1], [23.0, 3.1], [168.0, 3.1], [150.0, 7.0], [9.0, 5.3], [50.0, 6.3], [120.0, 5.2], [9.0, 4.0], [12.0, 4.9], [9.0, 4.5], [8.0, 2.9], [57.0, 3.2], [7.0, 4.1], [7.0, 4.6], [10.0, 4.5], [10.0, 4.0], [18.0, 4.1], [16.0, 3.3], [540.0, 6.4], [18.0, 4.6], [33.0, 5.7], [10.0, 3.7], [10.0, 3.2], [19.0, 5.1], [30.0, 5.6], [5.0, 2.8], [8.0, 4.3], [8.0, 4.8], [17.0, 3.0], [140.0, 5.7], [20.0, 5.8], [20.0, 5.3], [0.0, 2.4], [0.0, 2.9], [11.0, 2.9], [6.0, 2.0], [90.0, 6.1], [13.0, 2.8], [14.0, 3.4], [100.0, 6.3], [150.0, 6.0], [27.0, 3.3], [430.0, 6.8], [11.0, 4.8], [11.0, 4.3], [26.0, 3.6], [9.0, 3.0], [9.0, 3.5], [14.0, 4.2], [15.0, 3.1], [10.0, 1.9], [40.0, 7.2], [15.0, 4.4], [26.0, 4.9], [21.0, 3.2], [16.0, 2.8], [15.0, 6.3], [13.0, 5.0], [44.0, 4.2], [56.0, 3.1], [139.0, 3.2], [10.0, 4.6], [8.0, 3.8], [8.0, 3.3], [22.0, 3.2], [7.0, 3.6], [7.0, 3.1], [18.0, 3.6], [18.0, 3.1], [22.0, 5.1], [20.0, 4.3], [550.0, 6.7], [20.0, 3.0], [25.0, 3.4], [550.0, 5.9], [90.0, 5.6], [18.0, 4.4], [7.0, 4.9], [570.0, 6.0], [10.0, 6.2], [10.0, 6.7], [25.0, 4.2], [150.0, 5.5], [10.0, 5.9], [10.0, 5.4], [5.0, 4.5], [6.0, 3.4], [6.0, 3.9], [9.0, 2.0], [15.0, 2.1], [11.0, 3.8], [120.0, 5.6], [5.0, 3.2], [120.0, 5.1], [14.0, 5.1], [20.0, 7.5], [20.0, 7.0], [6.0, 4.2], [23.0, 3.0], [12.0, 3.0], [12.0, 3.5], [590.0, 6.0], [13.0, 3.2], [24.0, 3.2], [13.0, 3.7], [470.0, 6.6], [8.0, 2.8], [7.0, 2.6], [120.0, 6.4], [22.0, 4.1], [11.0, 6.5], [22.0, 3.3], [22.0, 3.8], [66.0, 3.9], [79.0, 4.1], [10.0, 3.1], [10.0, 3.6], [620.0, 6.0], [550.0, 6.8], [10.0, 4.4], [16.0, 3.7], [10.0, 7.6], [10.0, 7.1], [6.0, 2.9], [11.0, 2.8], [11.0, 2.3], [6.0, 2.4], [390.0, 5.9], [0.0, 2.8], [80.0, 6.0], [10.0, 6.3], [10.0, 6.8], [8.0, 5.5], [17.0, 4.2], [5.0, 4.6], [20.0, 6.0], [14.0, 3.3], [5.0, 4.1], [12.0, 2.0], [90.0, 5.9], [20.0, 5.7], [20.0, 5.2], [6.0, 5.1], [15.0, 4.3], [40.0, 6.3], [15.0, 3.5], [15.0, 3.0], [9.0, 3.4], [26.0, 3.0]]
  option = {
  dataset: [
    {
      source: data
    },
    {
      transform: {
        type: 'ecStat:regression',
        config: { method: 'polynomial', order: 3 }
      }
    }
  ],
  title: {
    //text: '18 companies net profit and main business income (million)',
    //subtext: 'By ecStat.regression',
    sublink: 'https://github.com/ecomfe/echarts-stat',
    left: 'center',
    top: 16
  },
  tooltip: {
    trigger: 'axis',
    axisPointer: {
      type: 'cross'
    }
  },
  xAxis: {
    splitLine: {
      lineStyle: {
        type: 'dashed'
      }
    },
    splitNumber: 8
  },
  yAxis: {
    //min: -40,
    splitLine: {
      lineStyle: {
        type: 'dashed'
      }
    }
  },
  series: [
    {
      name: 'scatter',
      type: 'scatter',
      symbolSize: 5,
    },
    {
      name: 'line',
      type: 'line',
      smooth: true,
      datasetIndex: 1,
      symbolSize: 0.1,
      symbol: 'circle',
      label: { show: false, fontSize: 16 },//多项式表达式
      labelLayout: { dx: -20 },
      encode: { label: 2, tooltip: 1 }
    }
  ]
};

if (option && typeof option === 'object') {
  myChart.setOption(option);
}

window.addEventListener('resize', myChart.resize);

$(document).ready(function(){
  $('#scatter-chart-container').css('display', 'unset');
});